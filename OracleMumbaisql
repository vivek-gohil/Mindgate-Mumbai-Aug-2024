ALTER SESSION SET "_ORACLE_SCRIPT"=true; 
CREATE USER mindgatemumbai IDENTIFIED BY mindgatemumbai;
GRANT CONNECT,DBA TO mindgatemumbai;

-- Date : 8th Aug 2024 
-- DDL - CREATE ALTER DROP
-- DML - INSERT UPDATE DELETE
-- CONSTRAINTS - PRIMARY KEY,FOREGIN KEY,CHECK CONSTRAINT,DEFAULT,NOT NULL,UNIQUE
-- ASSINGMENT

-- DDL - CREATE
CREATE TABLE employee_details (
    employee_id NUMBER(10),
    first_name VARCHAR2(50),
    last_name VARCHAR2(50),
    gender VARCHAR2(10),
    email VARCHAR2(50),
    contact_number VARCHAR2(15),
    date_of_birth DATE
);

DESC employee_details;

INSERT INTO employee_details 
VALUES(101,'Seema','Rai','Female','seema.rai@mindgate.in','9929324511','10-MAR-2010');


SELECT * FROM employee_details;

-- DDL - ALTER - MODIFY COLUMN
ALTER TABLE employee_details
MODIFY gender VARCHAR(6);

DESC employee_details;

-- DDL - ALTER - ADD ONE/MULTIPLE COLUMN
ALTER TABLE employee_details
ADD salary NUMBER(10,2);

ALTER TABLE employee_details
ADD ( 
salary NUMBER(10,2),
designation VARCHAR2(20)
);

DESC employee_details;

-- DDL - ALTER - REMOVE ONE/MULTIPLE COLUMN
ALTER TABLE employee_details
DROP COLUMN salary;

ALTER TABLE employee_details
DROP (salary  , designation);

DESC employee_details;

-- DDL - DROP 
DROP TABLE employee_details;

DESC employee_details;

-- DML - INSERT
CREATE TABLE employee_details (
    employee_id NUMBER(10),
    first_name VARCHAR2(50),
    last_name VARCHAR2(50),
    gender VARCHAR2(10),
    email VARCHAR2(50),
    contact_number VARCHAR2(15),
    date_of_birth DATE
);

DESC employee_details;
INSERT INTO employee_details 
VALUES(101,'Seema','Rai','Female','seema.rai@mindgate.in','9929324511','10-MAR-2010');

INSERT INTO employee_details (first_name,last_name,gender,contact_number,date_of_birth,employee_id)
VALUES('Sagar','Thakur','Male','8890121212','15-AUG-2010',102);

SELECT * FROM employee_details;
-- DML - UPDATE 

UPDATE employee_details SET email='seema.rai@mindgate.in' , contact_number = ' ' WHERE employee_id=101 OR employee_id =102;
UPDATE employee_details SET email='seema.rai@mindgate.in' , contact_number = ' ' WHERE employee_id=101;

SELECT * FROM employee_details WHERE employee_id = 102;

-- DML - DELETE
DELETE employee_details WHERE employee_id = 101;
DELETE employee_details; -- Delete all rows

SELECT * FROM employee_details;

-- CONSTRAINTS - PRIMARY KEY
DROP TABLE employee_details;

CREATE TABLE employee_details (
    employee_id NUMBER(10) PRIMARY KEY,
    first_name VARCHAR2(50),
    last_name VARCHAR2(50),
    gender VARCHAR2(10),
    email VARCHAR2(50),
    contact_number VARCHAR2(15),
    date_of_birth DATE
);

CREATE TABLE employee_details (
    employee_id NUMBER(10),
    first_name VARCHAR2(50),
    last_name VARCHAR2(50),
    gender VARCHAR2(10),
    email VARCHAR2(50),
    contact_number VARCHAR2(15),
    date_of_birth DATE,
    CONSTRAINT employee_id_pk PRIMARY KEY(employee_id)
);
DESC employee_details;

-- COMPOSITE PRIMARY KEY
DROP TABLE employee_details;
CREATE TABLE employee_details (
    employee_id NUMBER(10),
    first_name VARCHAR2(50),
    last_name VARCHAR2(50),
    gender VARCHAR2(10),
    email VARCHAR2(50),
    contact_number VARCHAR2(15),
    date_of_birth DATE,
    CONSTRAINT employee_pk PRIMARY KEY(employee_id,first_name)
);
INSERT INTO employee_details 
VALUES(101,'Seema','Rai','Female','seema.rai@mindgate.in','9929324511','10-MAR-2010');
INSERT INTO employee_details 
VALUES(102,'Seema','Sharma','Female','seema.sharma@mindgate.in','9929324511','10-MAR-2010');
INSERT INTO employee_details 
VALUES(101,'Reema','Sharma','Female','seema.sharma@mindgate.in','9929324511','10-MAR-2010');

SELECT * FROM user_constraints;

-- FOREIGN KEY - EMPLOYEE AND ADDRESS
CREATE TABLE address_details(
    address_id NUMBER(10),
    house_name VARCHAR2(50),
    street VARCHAR2(50),
    city VARCHAR2(50),
    pin NUMBER(10),
    CONSTRAINT address_id_pk PRIMARY KEY(address_id)
);

INSERT INTO address_details VALUES(1,'Woodland Park','M.G. Road','Mumbai',400012);
INSERT INTO address_details VALUES(2,'Shanti Niketan','L.B.S Road','Mumbai',400321);
INSERT INTO address_details VALUES(3,'Ram Niwas','A B Road','Mumbai',400001);

SELECT * FROM address_details;

DROP TABLE employee_details;
CREATE TABLE employee_details (
    employee_id NUMBER(10),
    first_name VARCHAR2(50),
    last_name VARCHAR2(50),
    gender VARCHAR2(10),
    email VARCHAR2(50),
    contact_number VARCHAR2(15),
    date_of_birth DATE,
    address_id NUMBER(10),
    CONSTRAINT employee_id_pk PRIMARY KEY(employee_id),
    CONSTRAINT address_id_fk FOREIGN KEY(address_id) REFERENCES address_details(address_id)
);

INSERT INTO employee_details 
VALUES(101,'Seema','Rai','Female','seema.rai@mindgate.in','9929324511','10-MAR-2010',1);
INSERT INTO employee_details 
VALUES(102,'Seema','Sharma','Female','seema.sharma@mindgate.in','9929324511','10-MAR-2010',2);
INSERT INTO employee_details 
VALUES(103,'Reema','Sharma','Female','reema.sharma@mindgate.in','1234567890','10-FEB-2010',3);

INSERT INTO employee_details 
VALUES(104,'Vivek','Gohil','Male','vivek.gohil@mindgate.in','1234567890','10-FEB-2010',1);

SELECT * FROM employee_details;

-- CHECK CONSTRAINT
DROP TABLE employee_details;
DROP TABLE address_details;
CREATE TABLE employee_details (
    employee_id VARCHAR2(13),
    first_name VARCHAR2(50),
    last_name VARCHAR2(50),
    gender VARCHAR2(10),
    email VARCHAR2(50),
    contact_number VARCHAR2(15),
    date_of_birth DATE,
    address_id NUMBER(10),
    CONSTRAINT employee_id_pk PRIMARY KEY(employee_id),
    CONSTRAINT address_id_fk FOREIGN KEY(address_id) REFERENCES address_details(address_id),
    CONSTRAINT gender_ck CHECK (gender IN ('Male','Female','Other')),
    CONSTRAINT employee_id_ck CHECK ((employee_id LIKE 'MGS%') OR ((employee_id LIKE 'mgs%')))
);

INSERT INTO employee_details 
VALUES('MGS101','Seema','Rai','Female','seema.rai@mindgate.in','9929324511','10-MAR-2010',1);
INSERT INTO employee_details 
VALUES(102,'Seema','Sharma','Female','seema.sharma@mindgate.in','9929324511','10-MAR-2010',2);
INSERT INTO employee_details 
VALUES(103,'Reema','Sharma','Other','reema.sharma@mindgate.in','1234567890','10-FEB-2010',3);

INSERT INTO employee_details 
VALUES(104,'Vivek','Gohil','Male','vivek.gohil@mindgate.in','1234567890','10-FEB-2010',1);


SELECT SYSDATE - date_of_birth , date_of_birth  FROM employee_details;

SELECT EXTRACT (YEAR FROM SYSDATE) FROM dual;


DROP TABLE address_details;
CREATE TABLE employee_details (
    employee_id VARCHAR2(13),
    first_name VARCHAR2(50),
    last_name VARCHAR2(50),
    gender VARCHAR2(10),
    email VARCHAR2(50),
    contact_number VARCHAR2(15),
    date_of_birth DATE,
    address_id NUMBER(10),
    CONSTRAINT employee_id_pk PRIMARY KEY(employee_id),
    CONSTRAINT gender_ck CHECK (gender IN ('Male','Female','Other')),
    CONSTRAINT employee_id_ck CHECK ((employee_id LIKE 'MGS%') OR ((employee_id LIKE 'mgs%')))
);
INSERT INTO employee_details 
VALUES('MGS101','Seema','Rai','Female','seema.rai@mindgate.in','9929324511','10-MAR-2010',1);
INSERT INTO employee_details 
VALUES('mgs101','Seema','Rai','Female','seema.rai@mindgate.in','9929324511','10-MAR-2010',1);
INSERT INTO employee_details 
VALUES('mgs102','Seema','Rai','Female','seema.rai@mindgate.in','9929324511','10-MAR-2010',1);
INSERT INTO employee_details 
VALUES('101','Seema','Rai','Female','seema.rai@mindgate.in','9929324511','10-MAR-2010',1);


--  DEFAULT CONSTRAINT
DROP TABLE address_details;
CREATE TABLE address_details(
    address_id NUMBER(10),
    house_name VARCHAR2(50),
    street VARCHAR2(50),
    city VARCHAR2(50) DEFAULT 'Mumbai',
    pin NUMBER(10),
    CONSTRAINT address_id_pk PRIMARY KEY(address_id)
);

INSERT INTO address_details(address_id,house_name,street,pin)
VALUES(1,'Woodland Park','M.G. Road',40012);

INSERT INTO address_details
VALUES(2,'Woodland Park','M.G. Road',default,40012);

SELECT * FROM address_details;